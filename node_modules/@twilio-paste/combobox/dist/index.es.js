var Tr=Object.prototype.hasOwnProperty;var It=Object.getOwnPropertySymbols,_r=Object.prototype.propertyIsEnumerable;var p=Object.assign;var E=(e,t)=>{var r={};for(var n in e)Tr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&It)for(var n of It(e))t.indexOf(n)<0&&_r.call(e,n)&&(r[n]=e[n]);return r},Cr=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports);var fr=Cr((he,ie)=>{var nn=200,on="Expected a function",ot="__lodash_hash_undefined__",Me=1,ae=2,At=1/0,Bt=9007199254740991,$e="[object Arguments]",it="[object Array]",Mt="[object Boolean]",$t="[object Date]",zt="[object Error]",Nt="[object Function]",an="[object GeneratorFunction]",ze="[object Map]",Dt="[object Number]",se="[object Object]",Ht="[object Promise]",Gt="[object RegExp]",Ne="[object Set]",Ut="[object String]",Wt="[object Symbol]",at="[object WeakMap]",Ft="[object ArrayBuffer]",De="[object DataView]",sn="[object Float32Array]",un="[object Float64Array]",pn="[object Int8Array]",fn="[object Int16Array]",ln="[object Int32Array]",cn="[object Uint8Array]",dn="[object Uint8ClampedArray]",mn="[object Uint16Array]",gn="[object Uint32Array]",bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yn=/^\w*$/,xn=/^\./,hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vn=/[\\^$.*+?()[\]{}|]/g,Tn=/\\(\\)?/g,_n=/^\[object .+?Constructor\]$/,Cn=/^(?:0|[1-9]\d*)$/,b={};b[sn]=b[un]=b[pn]=b[fn]=b[ln]=b[cn]=b[dn]=b[mn]=b[gn]=!0;b[$e]=b[it]=b[Ft]=b[Mt]=b[De]=b[$t]=b[zt]=b[Nt]=b[ze]=b[Dt]=b[se]=b[Gt]=b[Ne]=b[Ut]=b[at]=!1;var Kt=typeof global=="object"&&global&&global.Object===Object&&global,Pn=typeof self=="object"&&self&&self.Object===Object&&self,K=Kt||Pn||Function("return this")(),qt=typeof he=="object"&&he&&!he.nodeType&&he,Xt=qt&&typeof ie=="object"&&ie&&!ie.nodeType&&ie,In=Xt&&Xt.exports===qt,Yt=In&&Kt.process,Jt=function(){try{return Yt&&Yt.binding("util")}catch(e){}}(),Zt=Jt&&Jt.isTypedArray;function Sn(e,t,r,n){for(var o=-1,i=e?e.length:0;++o<i;){var a=e[o];t(n,a,r(a),e)}return n}function wn(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function On(e){return function(t){return t==null?void 0:t[e]}}function Rn(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function En(e){return function(t){return e(t)}}function Ln(e,t){return e==null?void 0:e[t]}function st(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(r){}return t}function An(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function Bn(e,t){return function(r){return e(t(r))}}function Mn(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var $n=Array.prototype,zn=Function.prototype,He=Object.prototype,ut=K["__core-js_shared__"],Qt=function(){var e=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Vt=zn.toString,L=He.hasOwnProperty,ue=He.toString,Nn=RegExp("^"+Vt.call(L).replace(vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=K.Symbol,kt=K.Uint8Array,Dn=He.propertyIsEnumerable,Hn=$n.splice,Gn=Bn(Object.keys,Object),pt=pe(K,"DataView"),ve=pe(K,"Map"),ft=pe(K,"Promise"),lt=pe(K,"Set"),ct=pe(K,"WeakMap"),Te=pe(Object,"create"),Un=ee(pt),Wn=ee(ve),Fn=ee(ft),Kn=ee(lt),qn=ee(ct),Ge=jt?jt.prototype:void 0,dt=Ge?Ge.valueOf:void 0,er=Ge?Ge.toString:void 0;function te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Xn(){this.__data__=Te?Te(null):{}}function Yn(e){return this.has(e)&&delete this.__data__[e]}function Jn(e){var t=this.__data__;if(Te){var r=t[e];return r===ot?void 0:r}return L.call(t,e)?t[e]:void 0}function Zn(e){var t=this.__data__;return Te?t[e]!==void 0:L.call(t,e)}function Qn(e,t){var r=this.__data__;return r[e]=Te&&t===void 0?ot:t,this}te.prototype.clear=Xn;te.prototype.delete=Yn;te.prototype.get=Jn;te.prototype.has=Zn;te.prototype.set=Qn;function N(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vn(){this.__data__=[]}function jn(e){var t=this.__data__,r=Ue(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Hn.call(t,r,1),!0}function kn(e){var t=this.__data__,r=Ue(t,e);return r<0?void 0:t[r][1]}function eo(e){return Ue(this.__data__,e)>-1}function to(e,t){var r=this.__data__,n=Ue(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}N.prototype.clear=Vn;N.prototype.delete=jn;N.prototype.get=kn;N.prototype.has=eo;N.prototype.set=to;function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ro(){this.__data__={hash:new te,map:new(ve||N),string:new te}}function no(e){return We(this,e).delete(e)}function oo(e){return We(this,e).get(e)}function io(e){return We(this,e).has(e)}function ao(e,t){return We(this,e).set(e,t),this}D.prototype.clear=ro;D.prototype.delete=no;D.prototype.get=oo;D.prototype.has=io;D.prototype.set=ao;function Fe(e){var t=-1,r=e?e.length:0;for(this.__data__=new D;++t<r;)this.add(e[t])}function so(e){return this.__data__.set(e,ot),this}function uo(e){return this.__data__.has(e)}Fe.prototype.add=Fe.prototype.push=so;Fe.prototype.has=uo;function H(e){this.__data__=new N(e)}function po(){this.__data__=new N}function fo(e){return this.__data__.delete(e)}function lo(e){return this.__data__.get(e)}function co(e){return this.__data__.has(e)}function mo(e,t){var r=this.__data__;if(r instanceof N){var n=r.__data__;if(!ve||n.length<nn-1)return n.push([e,t]),this;r=this.__data__=new D(n)}return r.set(e,t),this}H.prototype.clear=po;H.prototype.delete=fo;H.prototype.get=lo;H.prototype.has=co;H.prototype.set=mo;function go(e,t){var r=q(e)||rr(e)?Rn(e.length,String):[],n=r.length,o=!!n;for(var i in e)(t||L.call(e,i))&&!(o&&(i=="length"||tr(i,n)))&&r.push(i);return r}function Ue(e,t){for(var r=e.length;r--;)if(nr(e[r][0],t))return r;return-1}function yo(e,t,r,n){return bo(e,function(o,i,a){t(n,o,r(o),a)}),n}var bo=ho(xo),To=vo();function xo(e,t){return e&&To(e,t,Ke)}function ir(e,t){t=qe(t,e)?[t]:or(t);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Xe(t[r++])];return r&&r==n?e:void 0}function _o(e){return ue.call(e)}function Co(e,t){return e!=null&&t in Object(e)}function mt(e,t,r,n,o){return e===t?!0:e==null||t==null||!Ye(e)&&!Je(t)?e!==e&&t!==t:Po(e,t,mt,r,n,o)}function Po(e,t,r,n,o,i){var a=q(e),s=q(t),u=it,f=it;a||(u=X(e),u=u==$e?se:u),s||(f=X(t),f=f==$e?se:f);var d=u==se&&!st(e),x=f==se&&!st(t),g=u==f;if(g&&!d)return i||(i=new H),a||wo(e)?ar(e,t,r,n,o,i):Io(e,t,u,r,n,o,i);if(!(o&ae)){var h=d&&L.call(e,"__wrapped__"),l=x&&L.call(t,"__wrapped__");if(h||l){var c=h?e.value():e,v=l?t.value():t;return i||(i=new H),r(c,v,n,o,i)}}return g?(i||(i=new H),So(e,t,r,n,o,i)):!1}function Oo(e,t,r,n){var o=r.length,i=o,a=!n;if(e==null)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){s=r[o];var u=s[0],f=e[u],d=s[1];if(a&&s[2]){if(f===void 0&&!(u in e))return!1}else{var x=new H;if(n)var g=n(f,d,u,e,t,x);if(!(g===void 0?mt(d,f,n,Me|ae,x):g))return!1}}return!0}function Eo(e){if(!Ye(e)||Ro(e))return!1;var t=sr(e)||st(e)?Nn:_n;return t.test(ee(e))}function Lo(e){return Je(e)&&gt(e.length)&&!!b[ue.call(e)]}function zo(e){return typeof e=="function"?e:e==null?Mo:typeof e=="object"?q(e)?Bo(e[0],e[1]):Ao(e):$o(e)}function Do(e){if(!No(e))return Gn(e);var t=[];for(var r in Object(e))L.call(e,r)&&r!="constructor"&&t.push(r);return t}function Ao(e){var t=Ho(e);return t.length==1&&t[0][2]?ur(t[0][0],t[0][1]):function(r){return r===e||Oo(r,e,t)}}function Bo(e,t){return qe(e)&&pr(t)?ur(Xe(e),t):function(r){var n=Go(r,e);return n===void 0&&n===t?Uo(r,e):mt(t,n,void 0,Me|ae)}}function Wo(e){return function(t){return ir(t,e)}}function Fo(e){if(typeof e=="string")return e;if(bt(e))return er?er.call(e):"";var t=e+"";return t=="0"&&1/e==-At?"-0":t}function or(e){return q(e)?e:Ko(e)}function qo(e,t){return function(r,n){var o=q(r)?Sn:yo,i=t?t():{};return o(r,e,zo(n,2),i)}}function ho(e,t){return function(r,n){if(r==null)return r;if(!yt(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}function vo(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(r(i[u],u,i)===!1)break}return t}}function ar(e,t,r,n,o,i){var a=o&ae,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var f=i.get(e);if(f&&i.get(t))return f==t;var d=-1,x=!0,g=o&Me?new Fe:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var h=e[d],l=t[d];if(n)var c=a?n(l,h,d,t,e,i):n(h,l,d,e,t,i);if(c!==void 0){if(c)continue;x=!1;break}if(g){if(!wn(t,function(v,C){if(!g.has(C)&&(h===v||r(h,v,n,o,i)))return g.add(C)})){x=!1;break}}else if(!(h===l||r(h,l,n,o,i))){x=!1;break}}return i.delete(e),i.delete(t),x}function Io(e,t,r,n,o,i,a){switch(r){case De:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ft:return!(e.byteLength!=t.byteLength||!n(new kt(e),new kt(t)));case Mt:case $t:case Dt:return nr(+e,+t);case zt:return e.name==t.name&&e.message==t.message;case Gt:case Ut:return e==t+"";case ze:var s=An;case Ne:var u=i&ae;if(s||(s=Mn),e.size!=t.size&&!u)return!1;var f=a.get(e);if(f)return f==t;i|=Me,a.set(e,t);var d=ar(s(e),s(t),n,o,i,a);return a.delete(e),d;case Wt:if(dt)return dt.call(e)==dt.call(t)}return!1}function So(e,t,r,n,o,i){var a=o&ae,s=Ke(e),u=s.length,f=Ke(t),d=f.length;if(u!=d&&!a)return!1;for(var x=u;x--;){var g=s[x];if(!(a?g in t:L.call(t,g)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var l=!0;i.set(e,t),i.set(t,e);for(var c=a;++x<u;){g=s[x];var v=e[g],C=t[g];if(n)var G=a?n(C,v,g,t,e,i):n(v,C,g,e,t,i);if(!(G===void 0?v===C||r(v,C,n,o,i):G)){l=!1;break}c||(c=g=="constructor")}if(l&&!c){var R=e.constructor,B=t.constructor;R!=B&&"constructor"in e&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof B=="function"&&B instanceof B)&&(l=!1)}return i.delete(e),i.delete(t),l}function We(e,t){var r=e.__data__;return Xo(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ho(e){for(var t=Ke(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,pr(o)]}return t}function pe(e,t){var r=Ln(e,t);return Eo(r)?r:void 0}var X=_o;(pt&&X(new pt(new ArrayBuffer(1)))!=De||ve&&X(new ve)!=ze||ft&&X(ft.resolve())!=Ht||lt&&X(new lt)!=Ne||ct&&X(new ct)!=at)&&(X=function(e){var t=ue.call(e),r=t==se?e.constructor:void 0,n=r?ee(r):void 0;if(n)switch(n){case Un:return De;case Wn:return ze;case Fn:return Ht;case Kn:return Ne;case qn:return at}return t});function Yo(e,t,r){t=qe(t,e)?[t]:or(t);for(var n,o=-1,i=t.length;++o<i;){var a=Xe(t[o]);if(!(n=e!=null&&r(e,a)))break;e=e[a]}if(n)return n;var i=e?e.length:0;return!!i&&gt(i)&&tr(a,i)&&(q(e)||rr(e))}function tr(e,t){return t=t==null?Bt:t,!!t&&(typeof e=="number"||Cn.test(e))&&e>-1&&e%1==0&&e<t}function qe(e,t){if(q(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||bt(e)?!0:yn.test(e)||!bn.test(e)||t!=null&&e in Object(t)}function Xo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ro(e){return!!Qt&&Qt in e}function No(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||He;return e===r}function pr(e){return e===e&&!Ye(e)}function ur(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Ko=xt(function(e){e=Jo(e);var t=[];return xn.test(e)&&t.push(""),e.replace(hn,function(r,n,o,i){t.push(o?i.replace(Tn,"$1"):n||r)}),t});function Xe(e){if(typeof e=="string"||bt(e))return e;var t=e+"";return t=="0"&&1/e==-At?"-0":t}function ee(e){if(e!=null){try{return Vt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Zo=qo(function(e,t,r){L.call(e,r)?e[r].push(t):e[r]=[t]});function xt(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(on);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(xt.Cache||D),r}xt.Cache=D;function nr(e,t){return e===t||e!==e&&t!==t}function rr(e){return Qo(e)&&L.call(e,"callee")&&(!Dn.call(e,"callee")||ue.call(e)==$e)}var q=Array.isArray;function yt(e){return e!=null&&gt(e.length)&&!sr(e)}function Qo(e){return Je(e)&&yt(e)}function sr(e){var t=Ye(e)?ue.call(e):"";return t==Nt||t==an}function gt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bt}function Ye(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Je(e){return!!e&&typeof e=="object"}function bt(e){return typeof e=="symbol"||Je(e)&&ue.call(e)==Wt}var wo=Zt?En(Zt):Lo;function Jo(e){return e==null?"":Fo(e)}function Go(e,t,r){var n=e==null?void 0:ir(e,t);return n===void 0?r:n}function Uo(e,t){return e!=null&&Yo(e,t,Co)}function Ke(e){return yt(e)?go(e):Do(e)}function Mo(e){return e}function $o(e){return qe(e)?On(Xe(e)):Wo(e)}ie.exports=Zo});import{useComboboxPrimitive as yi}from"@twilio-paste/combobox-primitive";import{createElement as A,forwardRef as ti,useCallback as mr,useEffect as ri,useRef as ni}from"react";import{any as oi,arrayOf as ii,bool as gr,func as le,node as br,object as yr,oneOfType as Ze,string as ce}from"prop-types";import y from"react";function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function Pr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Ir=["bottom","height","left","right","top","width"],Sr=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),Ir.some(function(n){return t[n]!==r[n]})},F=new Map,St,wr=function e(){var t=[];F.forEach(function(r,n){var o=n.getBoundingClientRect();Sr(o,r.rect)&&(r.rect=o,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(n){return n(r.rect)})}),St=window.requestAnimationFrame(e)};function Or(e,t){return{observe:function(){var n=F.size===0;F.has(e)?F.get(e).callbacks.push(t):F.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&wr()},unobserve:function(){var n=F.get(e);if(n){var o=n.callbacks.indexOf(t);o>=0&&n.callbacks.splice(o,1),n.callbacks.length||F.delete(e),F.size||cancelAnimationFrame(St)}}}}var be=typeof window!="undefined"?y.useLayoutEffect:y.useEffect;function Er(e){var t=y.useState(e.current),r=t[0],n=t[1],o=y.useReducer(Rr,null),i=o[0],a=o[1],s=y.useRef(!1);return be(function(){e.current!==r&&n(e.current)}),be(function(){if(r&&!s.current){s.current=!0;var u=r.getBoundingClientRect();a({rect:u})}},[r]),y.useEffect(function(){if(!!r){var u=Or(r,function(f){a({rect:f})});return u.observe(),function(){u.unobserve()}}},[r]),i}function Rr(e,t){var r=t.rect;return!e||e.height!==r.height||e.width!==r.width?r:e}var Lr=function(){return 50},Ar=function(t){return t},Br=function(t,r){var n=r?"offsetWidth":"offsetHeight";return t[n]},Mr=function(t){for(var r=Math.max(t.start-t.overscan,0),n=Math.min(t.end+t.overscan,t.size-1),o=[],i=r;i<=n;i++)o.push(i);return o};function Ot(e){var t,r,n=e.size,o=n===void 0?0:n,i=e.estimateSize,a=i===void 0?Lr:i,s=e.overscan,u=s===void 0?1:s,f=e.paddingStart,d=f===void 0?0:f,x=e.paddingEnd,g=x===void 0?0:x,h=e.parentRef,l=e.horizontal,c=e.scrollToFn,v=e.useObserver,C=e.onScrollElement,G=e.scrollOffsetFn,R=e.keyExtractor,B=R===void 0?Ar:R,_e=e.measureSize,Y=_e===void 0?Br:_e,Ce=e.rangeExtractor,Pe=Ce===void 0?Mr:Ce,Ie=l?"width":"height",J=l?"scrollLeft":"scrollTop",S=y.useRef({scrollOffset:0,measurements:[]}),Se=v||Er,we=Se(h)||(t={},t[Ie]=0,t),re=we[Ie];S.current.outerSize=re;var Z=y.useCallback(function(m){h.current&&(h.current[J]=m)},[h,J]),Oe=c||Z;c=y.useCallback(function(m){Oe(m,Z)},[Z,Oe]);var Re=y.useState({}),de=Re[0],ne=Re[1],Ee=y.useCallback(function(){return ne({})},[]),Q=y.useRef([]),M=y.useMemo(function(){var m=Q.current.length>0?Math.min.apply(Math,Q.current):0;Q.current=[];for(var P=S.current.measurements.slice(0,m),T=m;T<o;T++){var I=B(T),_=de[I],U=P[T-1]?P[T-1].end:d,O=typeof _=="number"?_:a(T),W=U+O;P[T]={index:T,start:U,size:O,end:W,key:I}}return P},[a,de,d,o,B]),me=(((r=M[o-1])==null?void 0:r.end)||0)+g;S.current.measurements=M,S.current.totalSize=me;var $=y.useState({start:0,end:0}),V=$[0],j=$[1],z=C?C.current:h.current,Qe=y.useRef(G);Qe.current=G;var Le=y.useRef(null),Ae=y.useCallback(function(){Le.current!==null&&(clearTimeout(Le.current),Le.current=null)},[]);be(function(){return Le.current=setTimeout(function(){j(function(m){return wt(S.current,m)})}),function(){return Ae()}},[M,re,Ae]),be(function(){if(!z){j({start:0,end:0}),S.current.scrollOffset=0;return}var m=function(T){var I=Qe.current?Qe.current(T):z[J];S.current.scrollOffset=I,Ae(),j(function(_){return wt(S.current,_)})};return m(),z.addEventListener("scroll",m,{capture:!1,passive:!0}),function(){z.removeEventListener("scroll",m)}},[z,J,Ae]);var vt=y.useRef(Y);vt.current=Y;var xr=y.useMemo(function(){for(var m=Pe({start:V.start,end:V.end,overscan:u,size:M.length}),P=[],T=function(O,W){var ge=m[O],ke=M[ge],w=k(k({},ke),{},{measureRef:function(Ct){if(Ct){var et=vt.current(Ct,l);if(et!==w.size){var Pt=S.current.scrollOffset;w.start<Pt&&Z(Pt+(et-w.size)),Q.current.push(ge),ne(function(vr){var tt;return k(k({},vr),{},(tt={},tt[w.key]=et,tt))})}}}});P.push(w)},I=0,_=m.length;I<_;I++)T(I);return P},[Z,l,M,u,V.end,V.start,Pe]),Tt=y.useRef();be(function(){Tt.current&&a&&ne({}),Tt.current=!0},[a]);var Ve=y.useCallback(function(m,P){var T=P===void 0?{}:P,I=T.align,_=I===void 0?"start":I,U=S.current,O=U.scrollOffset,W=U.outerSize;_==="auto"&&(m<=O?_="start":m>=O+W?_="end":_="start"),_==="start"?c(m):_==="end"?c(m-W):_==="center"&&c(m-W/2)},[c]),je=y.useCallback(function(m,P){var T=P===void 0?{}:P,I=T.align,_=I===void 0?"auto":I,U=Pr(T,["align"]),O=S.current,W=O.measurements,ge=O.scrollOffset,ke=O.outerSize,w=W[Math.max(0,Math.min(m,o-1))];if(!!w){if(_==="auto")if(w.end>=ge+ke)_="end";else if(w.start<=ge)_="start";else return;var _t=_==="center"?w.start+w.size/2:_==="end"?w.end:w.start;Ve(_t,k({align:_},U))}},[Ve,o]),hr=y.useCallback(function(){for(var m=arguments.length,P=new Array(m),T=0;T<m;T++)P[T]=arguments[T];je.apply(void 0,P),requestAnimationFrame(function(){je.apply(void 0,P)})},[je]);return{virtualItems:xr,totalSize:me,scrollToOffset:Ve,scrollToIndex:hr,measure:Ee}}var $r=function(t,r,n,o){for(;t<=r;){var i=(t+r)/2|0,a=n(i);if(a<o)t=i+1;else if(a>o)r=i-1;else return i}return t>0?t-1:0};function wt(e,t){for(var r=e.measurements,n=e.outerSize,o=e.scrollOffset,i=r.length-1,a=function(d){return r[d].start},s=$r(0,i,a,o),u=s;u<i&&r[u].end<o+n;)u++;return t.start!==s||t.end!==u?{start:s,end:u}:t}import{useTheme as ai,remToPx as si}from"@twilio-paste/theme";import{useUID as ui}from"@twilio-paste/uid-library";import{useComboboxPrimitive as pi}from"@twilio-paste/combobox-primitive";import{ChevronDownIcon as fi}from"@twilio-paste/icons/esm/ChevronDownIcon";import{Box as li}from"@twilio-paste/box";import{InputBox as ci,InputChevronWrapper as di}from"@twilio-paste/input-box";import{Label as mi}from"@twilio-paste/label";import{HelpText as gi}from"@twilio-paste/help-text";import{createElement as zr,forwardRef as Nr}from"react";import{InputElement as Dr}from"@twilio-paste/input";var rt=Nr((r,t)=>{var e=E(r,[]);return zr(Dr,p({paddingRight:e.autocomplete?null:"space100",type:"text",ref:t},e))});rt.displayName="ComboboxInputSelect";import{createElement as Hr,forwardRef as Gr}from"react";import{node as wi}from"prop-types";import{Box as Ur,safelySpreadBoxProps as Wr}from"@twilio-paste/box";var Be=Gr((n,r)=>{var{children:e}=n,t=E(n,["children"]);return Hr(Ur,p(p({},Wr(t)),{display:"flex",position:"relative",width:"100%",ref:r}),e)});Be.displayName="ComboboxInputWrapper";import{createElement as Fr,forwardRef as Kr}from"react";import{node as qr,string as Xr}from"prop-types";import{Box as Yr,safelySpreadBoxProps as Jr}from"@twilio-paste/box";var ye=Kr((o,n)=>{var{children:e,element:t="COMBOBOX"}=o,r=E(o,["children","element"]);return Fr(Yr,p(p({},Jr(r)),{as:"div",backgroundColor:"colorBackgroundBody",borderRadius:"borderRadius20",borderColor:"colorBorderWeak",borderWidth:"borderWidth10",borderStyle:"solid",boxShadow:"shadow",element:`${t}_LISTBOX`,listStyleType:"none",margin:"space0",overflowY:"auto",padding:"space0",paddingY:"space30",position:"absolute",width:"100%",maxHeight:"size30",zIndex:"zIndex20",marginTop:"space20",ref:n}),e)});ye.displayName="ComboboxListbox";ye.propTypes={children:qr.isRequired,element:Xr};import{Fragment as jo,createElement as fe,useMemo as ko}from"react";import{useUIDSeed as ei}from"@twilio-paste/uid-library";import{createElement as Rt,forwardRef as Zr}from"react";import{bool as zi,node as Ni,oneOf as Di}from"prop-types";import{Box as Qr,safelySpreadBoxProps as Vr}from"@twilio-paste/box";import{Text as jr}from"@twilio-paste/text";var kr={groupOption:{paddingLeft:"space90",paddingRight:"space90"},default:{paddingLeft:"space70",paddingRight:"space70"}},xe=Zr((s,a)=>{var{children:e,element:t="COMBOBOX",highlighted:r,variant:n="default",startHeight:o}=s,i=E(s,["children","element","highlighted","variant","startHeight"]);let u=o!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${o}px)`}:{};return Rt(Qr,p(p(p(p({},Vr(i)),{as:"li",element:`${t}_LIST_ITEM`,backgroundColor:r?"colorBackgroundPrimaryWeakest":"colorBackgroundBody",padding:"space30",cursor:"pointer",ref:a}),u),kr[n]),Rt(jr,{as:"span",color:"colorText",element:`${t}_LIST_ITEM_TEXT`,textDecoration:r?"underline":null},e))});xe.displayName="ComboboxListboxOption";import{createElement as nt,forwardRef as en}from"react";import{node as tn,string as Et}from"prop-types";import{Box as Lt}from"@twilio-paste/box";import{Text as rn}from"@twilio-paste/text";var oe=en(({children:e,element:t="COMBOBOX",groupName:r,groupLabelTemplate:n},o)=>nt(Lt,{as:"ul",element:`${t}_LIST`,role:r?"group":"presentation","aria-label":r,ref:o,margin:"space0",padding:"space0",listStyleType:"none"},r?nt(Lt,{as:"li",role:"presentation",paddingY:"space30",paddingX:"space70",element:`${t}_GROUPNAME`},nt(rn,{as:"span",fontWeight:"fontWeightBold",element:`${t}_GROUPNAME_TEXT`},n?n(r):r)):null,e));oe.displayName="ComboboxListboxGroup";oe.propTypes={children:tn.isRequired,groupName:Et,element:Et};var Vo=fr(),lr=e=>e.map((t,r)=>typeof t=="string"?{label:t,index:r}:p(p({},t),{index:r})),cr=(e,t)=>Vo(e,r=>typeof r=="string"?"Uncategorized":r[t]);var dr=({items:e,element:t="COMBOBOX",getItemProps:r,highlightedIndex:n,optionTemplate:o,groupLabelTemplate:i,groupItemsBy:a,totalSize:s,virtualItems:u})=>{let f=ei(),d=ko(()=>o!=null&&typeof o=="function"?e.map(l=>o(l)):e,[JSON.stringify(e),o]);if(a==null)return fe(oe,{element:t},fe("li",{role:"presentation",key:"total-size",style:{height:s}}),u.map(l=>{let{index:c}=l,v=d[c];return fe(xe,p(p({},r({item:v,index:c,ref:l.measureRef})),{element:t,highlighted:n===c,key:f(`item-${c}`),variant:"default",startHeight:l.start,"aria-setsize":e.length,"aria-posinset":c+1}),v)}));let x=lr(e),g=cr(x,a),h=Object.keys(g);return fe(jo,null,h.map(l=>{let c=l==="undefined",v=c?"$$$Uncategorized$$$":l;return fe(oe,{element:t,key:f(v),groupName:c?void 0:v,groupLabelTemplate:i},g[l].map(C=>fe(xe,p(p({},r({item:C,index:C.index})),{element:t,highlighted:n===C.index,key:f(`${v}-${C.index}`),variant:c?"default":"groupOption"}),o?o(C):C)))}))};var bi=(e,t)=>t&&e==="inverse"?"error_inverse":t?"error":e==="inverse"?"inverse":"default",ht=ti((J,Ie)=>{var{autocomplete:e,disabled:t,element:r="COMBOBOX",hasError:n,helpText:o,initialSelectedItem:i,initialIsOpen:a,inputValue:s,insertAfter:u,insertBefore:f,items:d,itemToString:x,labelText:g,onInputValueChange:h,onSelectedItemChange:l,optionTemplate:c,onHighlightedIndexChange:v,onIsOpenChange:C,required:G,selectedItem:R,groupItemsBy:B,groupLabelTemplate:_e,variant:Y="default",state:Ce}=J,Pe=E(J,["autocomplete","disabled","element","hasError","helpText","initialSelectedItem","initialIsOpen","inputValue","insertAfter","insertBefore","items","itemToString","labelText","onInputValueChange","onSelectedItemChange","optionTemplate","onHighlightedIndexChange","onIsOpenChange","required","selectedItem","groupItemsBy","groupLabelTemplate","variant","state"]);let S=ai(),Se=ni(null),we=ui(),{scrollToIndex:re,virtualItems:Z,totalSize:Oe}=Ot({size:d.length,parentRef:Se,estimateSize:mr(()=>36,[]),overscan:4,paddingStart:si(S.space.space30,"number")}),Re=pi(p(p(p(p({initialSelectedItem:i,items:d,onHighlightedIndexChange:mr(z=>{v&&v(z)},[v]),onInputValueChange:h,onIsOpenChange:C,onSelectedItemChange:l},x!=null&&{itemToString:x}),a!=null&&{initialIsOpen:a}),s!=null&&{inputValue:s}),R!=null&&{selectedItem:R})),{getComboboxProps:de,getInputProps:ne,getItemProps:Ee,getLabelProps:Q,getMenuProps:M,getToggleButtonProps:me,highlightedIndex:$,isOpen:V}=Ce||Re;if(ri(()=>{$!==void 0&&typeof re=="function"&&$>-1&&re($)},[$,re]),de===void 0||ne===void 0||Ee===void 0||Q===void 0||M===void 0||me===void 0||$===void 0||V===void 0)throw new Error("[Combobox]: One of getComboboxProps, getInputProps, getItemProps, getLabelProps, getMenuProps, getToggleButtonProps, highlightedIndex or isOpen is missing from the state object. Please make sure this is provided.");let j="colorTextIcon";return t?j="colorTextWeaker":Y==="inverse"&&(j="colorTextInverseWeak"),A(li,{position:"relative",element:`${r}_WRAPPER`},A(mi,p({disabled:t,required:G,variant:Y},Q()),g),A(ci,{disabled:t,element:r,hasError:n,insertBefore:f,insertAfter:u,variant:Y},A(Be,p({},de({role:"combobox"})),A(rt,p(p(p(p({},me({tabIndex:0})),ne(p({disabled:t,required:G,ref:Ie},Pe))),e?void 0:{onChange:z=>z.preventDefault()}),{autocomplete:e,"aria-describedby":we,element:`${r}_ELEMENT`})),!e&&A(di,{element:`${r}_CHEVRON_WRAPPER`},A(fi,{"aria-hidden":"true",decorative:!0,color:j,size:"sizeIcon30"})))),A(ye,p({hidden:!V,element:r},M({ref:Se})),A(dr,{items:d,element:r,getItemProps:Ee,highlightedIndex:$,optionTemplate:c,groupItemsBy:B,groupLabelTemplate:_e,totalSize:Oe,virtualItems:Z})),o&&A(gi,{id:we,variant:bi(Y,n)},o))});ht.displayName="Combobox";ht.propTypes={autocomplete:gr,element:ce,groupItemsBy:ce,helpText:Ze([ce,br]),initialIsOpen:gr,initialSelectedItem:Ze([ce,yr]),items:ii(oi).isRequired,itemToString:le,labelText:Ze([ce,br]).isRequired,onHighlightedIndexChange:le,onInputValueChange:le,onIsOpenChange:le,onSelectedItemChange:le,optionTemplate:le,selectedItem:Ze([ce,yr])};export{ht as Combobox,Be as ComboboxInputWrapper,ye as ComboboxListbox,oe as ComboboxListboxGroup,xe as ComboboxListboxOption,yi as useCombobox};
